# 页面优化

## 图片优化

### 格式
### 压缩
### 延迟加载

## HTML优化

### 精简html代码
### 文件位置

css文件链接尽量放在页面头部，css加载不会阻塞DOM Tree解析，但是会阻塞DOM Tree渲染，也会阻塞后面js执行。也就是说DOM Tree在渲染前就要解析好CSS，从而减少浏览器重排文档的次数。而且css放在页面底部会导致页面白屏时间变长。
js文件一般放在页面底部，这是防止js的加载和解析阻塞页面元素的正常渲染。

## CSS 优化

### 提升css渲染性能
谨慎使用一些expensive的属性，比如nth-child伪类或者position:fixed定位，因为这些比较消耗浏览器的渲染性能。  
尽量减少一些样式层级的级数，比如，div ul li span i { color: red}, 其实我们可以给i标签设置class，直接书写样式。  
避免使用占用过多cpu和内存的属性，比如text-indent不要设置太大的值。  
尽量避免使用耗电量大的属性，比较占用GPU, 比如transfrom是，transitions, opacity.  
合适的使用css选择器, 尽量避免使用通配符，避免使用css表达式。    
避免类正则的属性选择器。  
使用外链的css，可以单独形成文件放在cdn，使用缓存形式加载。  
避免使用@import因为他的加载会阻塞进程，需要加载完毕才会向下执行。  
精简css代码，使用缩写的语句，比如margin-top可以写在margin中，再者如果值为0能删除就删除，删除不必要的单位值，删除过多的分号，删除空格和注释。尽量减小样式表的体积。其实这些都可以使用压缩工具来处理，会方便很多。

## JavaScript 优化

### 提升js文件的加载性能
css文件放在head标签中，js文件放在body结尾的地方。这个是js的加载不要影响html的渲染。

### 变量和函数方面的优化
尽量使用id选择器，因为id选择器在查询效果上效率最快。
避免使用eval，这个方法比较消耗能行。
js函数尽可能保持简洁，不要把太多内容写在一个函数中。也建议使用事件的节流函数。事件委托等等。

### js动画
尽量避免添加大量的js动画，css3动画和canvas动画都比js动画性能好。
使用requestAnimationFrame来代替setTimeout和setInterval，因为requestAnimationFrame可以在正确的时间进行渲染，setTimout和setInterval无法保证渲染时机。不要在定时器里面绑定事件。

### 使用逻辑缓存
缓存dom对象，也就是用一个变量来存储dom对象，不要每次使用都查询。
缓存列表长度，也就是说用变量存储dom元素的个数，而不是每次都重新计算。

## 减少reflow和repaint

### css
避免过多的样式嵌套，最好可以快速的定位到元素。
避免使用css表达式，css表达式会在css绘制的过程中都会执行，会增加重排和回流的次数。
可以使用绝对定位让动画元素脱离文档流。
避免使用table布局他会引起浏览器的多次重绘，也不要使用float布局。
图片最好设置好设置width和height，这样图片在加载之后布局就可以确定了。
简化浏览器不必要额任务，使用viewport设置屏幕缩放级别。
避免频繁设置样式，将多个样式操作合并修改,一次性的更新。

### js
为了减少回流发生次数，应该避免频繁操作DOM，可以合并多次对DOM的修改，一次性批量处理。
控制绘制过程和绘制区域，绘制过程开销比较大的属性设置应当避免使用。

## 简化DOM操作
## 打包压缩
## 懒加载，预加载，预渲染
## 缓存
## CDN加速

##总结 
下载最少的内容，减少尽可能不必要的运算